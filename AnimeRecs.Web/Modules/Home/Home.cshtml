@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<AnimeRecs.Web.Modules.Home.HomeViewModel>
@using AnimeRecs.Web;
@{
    ViewBag.Title = "Anime Recommendation Finder";
}
@{
    Layout = "Layout/Master.cshtml";
}
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">AnimeRecs</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" id="algorithm-dropdown" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Algorithm: @Model.Algorithm.DisplayName<span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-menu-with-icons" role="menu">
                        @foreach (AlgorithmConfig algorithm in @Model.AvailableAlgorithms)
                        {
                            <li><a data-display-name="@algorithm.DisplayName" data-name="@algorithm.RecServiceName" data-details="@algorithm.ShowDetails" data-target-score-needed="@algorithm.TargetScoreNeeded" class="algorithm @(algorithm.DisplayName == Model.Algorithm.DisplayName ? "navbar-dropdown-selected" : "navbar-dropdown-not-selected")">@algorithm.DisplayName</a></li>
                        }
                        @*<li><a data-display-name="Classic" data-name="animerecs" data-details="false" data-target-score-needed="false" class="algorithm navbar-dropdown-selected">Classic</a></li>
                            <li><a data-display-name="Classic With Details" data-name="animerecs" data-details="true" data-target-score-needed="true" class="algorithm navbar-dropdown-not-selected">Classic With Details</a></li>
                            <li><a data-display-name="Highest Rated" data-name="averagescore" data-details="false" data-target-score-needed="false" class="algorithm navbar-dropdown-not-selected">Highest Rated</a></li>
                            <li><a data-display-name="Most Popular" data-name="mostpopular" data-details="false" data-target-score-needed="false" class="algorithm navbar-dropdown-not-selected">Most Popular</a></li>
                            <li><a data-display-name="Biased Matrix Factorization" data-name="biasedmatrixfactorization" data-details="false" data-target-score-needed="false" class="algorithm navbar-dropdown-not-selected">Biased Matrix Factorization</a></li>*@
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container viewport-center" id="main-content-outer">
    @*Post-recs: <div class="container" id="main-content-outer">*@
    <div class="div-center" id="main-content-inner">
        @*Post-recs: <div id="main-content-inner">*@
        <div id="input">
            <div class="title">Anime Recommendation Finder</div>
            @*Post-recs: <div class="title hidden">Anime Recommendation Finder</div>*@
            <form class="form-horizontal">
                <div class="form-group">
                    <div class="input-col-xs-6">
                        @*Post-recs: <div class="input-row col-xs-6">*@
                        <input type="text" class="form-control" id="usernameInput" placeholder="MyAnimeList.net username" />
                    </div>
                    <div class="input-col-xs-6"></div>
                    @*Post-recs: <div class="col-xs-6"></div>*@
                </div>
                <div class="form-group">
                    <div class="input-row">
                        @*Post-recs: <div class="input-row col-xs-6">*@
                        <button type="submit" class="btn btn-default" id="goButton">Go</button>
                    </div>
                    <div class="input-col-xs-6"></div>
                    @*Post-recs: <div class="col-xs-6"></div>*@
                </div>
                <input id="recSourceName" name="RecSourceName" type="hidden" value="@Model.Algorithm.RecServiceName" />
                <input id="displayDetailedResults" name="DisplayDetailedResults" type="hidden" value="@Model.DisplayDetailedResults" />
                @* TODO: Handle debug mode *@
                @* TODO: Handle target score needed *@
                @if (!Model.DebugModeOn)
                {
                    
                }
                
            </form>
        </div>
        <div id="results"></div>
    </div>
</div>
<footer class="footer-no-results" id="footer">
    @* Post-recs: <footer class="footer-results" id="footer">*@
    <div class="container">
        <div class="row">
            <div class="col-xs-6">Have a bug report or suggestion? <a href="@AppGlobals.Config.ClubMalLink">Post on the club on MAL</a>.</div>
            <div class="col-xs-6">Want to help make AnimeRecs better? <a href="https://github.com/LHCGreg/animerecs">Check out the code on GitHub</a>.</div>
        </div>
    </div>
</footer>
@*<div class="wrapper">
        <div id="header" class="noselect">
            <h1 class="title">
                Anime Recommendation Finder
            </h1>
        </div>
        <div id="main" class="splash">
            <div class="title">
                Anime Recommendation Finder
            </div>
            <div class="datainput">
                <div class="usernamesubmit">
                    <input class="username textinput bigtextinput" id="usernameInput" type="text" placeholder="your MyAnimeList.net username" />
                    <a class="go noselect" id="splash-go">
                        <div class="go-arrow">
                        </div>
                    </a>
                </div>
                @if (Model.TargetScoreNeeded)
                {
                    <div class="autoscores noselect">
                        <input id="autoscores" type="checkbox" value="autoscores" checked />
                        <label for="autoscores">
                            Guess my target score
                        </label>
                    </div>
                    <div class="scores" style="display: none;">
                        <div class="scoretitle">
                            Target score
                        </div>
                        <div class="scoreinput scoregood">
                            <input class="good textinput smalltextinput" id="minGoodScoreInput" type="text" value="8" maxlength="2" />
                        </div>
                    </div>
                }
                @if (Model.DebugModeOn)
                {
                    <label for="recSourceName">Rec Source</label>
                    <input type="text" value="@Model.Algorithm" id="recSourceName" class="textinput" />
                    <label for="withholdIds">Withhold anime ids (comma-separated)</label>
                    <input id="withholdIds" class="textinput" type="text" value="" />
                    <label for="withholdPercent">Withhold percent</label>
                    <input class="textinput smalltextinput" id="withholdPercent" type="text" value="0" />
                }
                @if (!Model.DebugModeOn)
                {
                    <input id="recSourceName" name="RecSourceName" type="hidden" value="@Model.Algorithm" />
                }
                <input id="displayDetailedResults" name="DisplayDetailedResults" type="hidden" value="@Model.DisplayDetailedResults" />
            </div>
            <div id="results"></div>
            <div class="push"></div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-left">
            <div class="footer-item">Have a bug report or suggestion? <a href="@AppGlobals.Config.ClubMalLink">Post on the club on MAL.</a></div>
            <div class="footer-item">Want to help make AnimeRecs better? <a href="https://github.com/LHCGreg/animerecs">Check out the code on GitHub</a>.</div>
        </div>
        <div class="footer-right">
            <div class="footer-item">animerecs.com is not affiliated with myanimelist.net, Crunchyroll, Funimation, Viz, or Hulu.</div>
        </div>
    </div>*@

<script type="application/dart" src="@Url.Content("~/Scripts/animerecs.dart")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/packages/browser/dart.js")"></script>
@*
    Copyright (C) 2015 Greg Najda

    This file is part of AnimeRecs.Web.

    AnimeRecs.Web is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    AnimeRecs.Web is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with AnimeRecs.Web.  If not, see <http://www.gnu.org/licenses/>.
*@
